<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Distributed QuEST: qubits_debug.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>qubits_debug.h File Reference</h1>
<p>Developer functions used for unit testing and debugging.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="precision_8h_source.html">precision.h</a>&quot;</code><br/>

<p><a href="qubits__debug_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qubits__debug_8h.html#a7169fd0442cbc3418f3fac4d13363ca2">initStateOfSingleQubit</a> (<a class="el" href="structMultiQubit.html">MultiQubit</a> *multiQubit, int qubitId, int outcome)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise the state vector of probability amplitudes such that one qubit is set to 'outcome' and all other qubits are in an equal superposition of zero and one.  <a href="#a7169fd0442cbc3418f3fac4d13363ca2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qubits__debug_8h.html#a03b3577a891731d505bc4b879fcca9d3">initStateDebug</a> (<a class="el" href="structMultiQubit.html">MultiQubit</a> *multiQubit)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise the state vector of probability amplitudes to an (unphysical) state with each component of each probability amplitude a unique floating point value.  <a href="#a03b3577a891731d505bc4b879fcca9d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qubits__debug_8h.html#a433876ee9f3bcc54af346300f571fc3c">initializeStateFromSingleFile</a> (<a class="el" href="structMultiQubit.html">MultiQubit</a> *multiQubit, char filename[200], <a class="el" href="structQuESTEnv.html">QuESTEnv</a> env)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qubits__debug_8h.html#a793584932ae384c82e7e42db7d35d18d">compareStates</a> (<a class="el" href="structMultiQubit.html">MultiQubit</a> mq1, <a class="el" href="structMultiQubit.html">MultiQubit</a> mq2, REAL precision)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qubits__debug_8h.html#a62da5b58d8ce84e6f4d24be1b872294e">reportNodeList</a> (<a class="el" href="structQuESTEnv.html">QuESTEnv</a> env)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Report a list of CPU hostnames and the rank that is running on each if running with MPI enabled and an error message otherwise.  <a href="#a62da5b58d8ce84e6f4d24be1b872294e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Developer functions used for unit testing and debugging. </p>
<p>Not part of the public API. May contain functions that are incomplete or untested. </p>

<p>Definition in file <a class="el" href="qubits__debug_8h_source.html">qubits_debug.h</a>.</p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a793584932ae384c82e7e42db7d35d18d"></a><!-- doxytag: member="qubits_debug.h::compareStates" ref="a793584932ae384c82e7e42db7d35d18d" args="(MultiQubit mq1, MultiQubit mq2, REAL precision)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compareStates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMultiQubit.html">MultiQubit</a>&nbsp;</td>
          <td class="paramname"> <em>mq1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structMultiQubit.html">MultiQubit</a>&nbsp;</td>
          <td class="paramname"> <em>mq2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">REAL&nbsp;</td>
          <td class="paramname"> <em>precision</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="qubits_8c_source.html#l00327">327</a> of file <a class="el" href="qubits_8c_source.html">qubits.c</a>.</p>

<p>References <a class="el" href="qubits_8h_source.html#l00014">ComplexArray::imag</a>, <a class="el" href="qubits_8h_source.html#l00053">MultiQubit::numAmps</a>, <a class="el" href="qubits_8h_source.html#l00013">ComplexArray::real</a>, <a class="el" href="precision_8h_source.html#l00023">REAL</a>, and <a class="el" href="qubits_8h_source.html#l00046">MultiQubit::stateVec</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00327"></a>00327                                                                  {
<a name="l00328"></a>00328         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> diff;
<a name="l00329"></a>00329         <span class="keywordtype">int</span> chunkSize = mq1.<a class="code" href="structMultiQubit.html#ae16f47d8b725c914fb7f66b6498d79db" title="Number of probability amplitudes held in stateVec by this process In the non-MPI...">numAmps</a>;
<a name="l00330"></a>00330         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;chunkSize; i++){
<a name="l00331"></a>00331                 diff = mq1.<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a4195cac6c784ea1b6271f1c7dba1548a">real</a>[i] - mq2.<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a4195cac6c784ea1b6271f1c7dba1548a">real</a>[i];
<a name="l00332"></a>00332                 <span class="keywordflow">if</span> (diff&lt;0) diff *= -1;
<a name="l00333"></a>00333                 <span class="keywordflow">if</span> (diff&gt;precision) <span class="keywordflow">return</span> 0;
<a name="l00334"></a>00334                 diff = mq1.<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a79dde47c7ae530c79cebfdf57b225968">imag</a>[i] - mq2.<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a79dde47c7ae530c79cebfdf57b225968">imag</a>[i];
<a name="l00335"></a>00335                 <span class="keywordflow">if</span> (diff&lt;0) diff *= -1;
<a name="l00336"></a>00336                 <span class="keywordflow">if</span> (diff&gt;precision) <span class="keywordflow">return</span> 0;
<a name="l00337"></a>00337         }
<a name="l00338"></a>00338         <span class="keywordflow">return</span> 1;
<a name="l00339"></a>00339 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a433876ee9f3bcc54af346300f571fc3c"></a><!-- doxytag: member="qubits_debug.h::initializeStateFromSingleFile" ref="a433876ee9f3bcc54af346300f571fc3c" args="(MultiQubit *multiQubit, char filename[200], QuESTEnv env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializeStateFromSingleFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMultiQubit.html">MultiQubit</a> *&nbsp;</td>
          <td class="paramname"> <em>multiQubit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>filename</em>[200], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structQuESTEnv.html">QuESTEnv</a>&nbsp;</td>
          <td class="paramname"> <em>env</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>fix -- format needs to work for single precision values </p>
</p>

<p>Definition at line <a class="el" href="qubits_8c_source.html#l00292">292</a> of file <a class="el" href="qubits_8c_source.html">qubits.c</a>.</p>

<p>References <a class="el" href="qubits_8h_source.html#l00055">MultiQubit::chunkId</a>, <a class="el" href="qubits_8h_source.html#l00014">ComplexArray::imag</a>, <a class="el" href="qubits_8h_source.html#l00053">MultiQubit::numAmps</a>, <a class="el" href="qubits_8h_source.html#l00057">MultiQubit::numChunks</a>, <a class="el" href="qubits_8h_source.html#l00013">ComplexArray::real</a>, <a class="el" href="precision_8h_source.html#l00023">REAL</a>, <a class="el" href="qubits_8h_source.html#l00046">MultiQubit::stateVec</a>, and <a class="el" href="qubits__env__local_8c_source.html#l00032">syncQuESTEnv()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00292"></a>00292                                                                                             {
<a name="l00293"></a>00293         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> chunkSize, stateVecSize;
<a name="l00294"></a>00294         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> indexInChunk, totalIndex;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296         chunkSize = multiQubit-&gt;<a class="code" href="structMultiQubit.html#ae16f47d8b725c914fb7f66b6498d79db" title="Number of probability amplitudes held in stateVec by this process In the non-MPI...">numAmps</a>;
<a name="l00297"></a>00297         stateVecSize = chunkSize*multiQubit-&gt;<a class="code" href="structMultiQubit.html#acd43f2f57991709c9e94f73662c972b2" title="Number of chunks the state vector is broken up into -- the number of MPI processes...">numChunks</a>;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecReal = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a4195cac6c784ea1b6271f1c7dba1548a">real</a>;
<a name="l00300"></a>00300         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecImag = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a79dde47c7ae530c79cebfdf57b225968">imag</a>;
<a name="l00301"></a>00301         
<a name="l00302"></a>00302         FILE *fp;
<a name="l00303"></a>00303         <span class="keywordtype">char</span> line[200];
<a name="l00304"></a>00304 
<a name="l00305"></a>00305         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> rank=0; rank&lt;(multiQubit-&gt;<a class="code" href="structMultiQubit.html#acd43f2f57991709c9e94f73662c972b2" title="Number of chunks the state vector is broken up into -- the number of MPI processes...">numChunks</a>); rank++){
<a name="l00306"></a>00306                 <span class="keywordflow">if</span> (rank==multiQubit-&gt;<a class="code" href="structMultiQubit.html#ab10c88249fa3825d6227ceec01d37e37" title="The position of the chunk of the state vector held by this process in the full state...">chunkId</a>){
<a name="l00307"></a>00307                         fp = fopen(filename, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00308"></a>00308                         indexInChunk = 0; totalIndex = 0;
<a name="l00309"></a>00309                         <span class="keywordflow">while</span> (fgets(line, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>)*200, fp) != NULL &amp;&amp; totalIndex&lt;stateVecSize){
<a name="l00310"></a>00310                                 <span class="keywordflow">if</span> (line[0]!=<span class="charliteral">&apos;#&apos;</span>){
<a name="l00311"></a>00311                                         <span class="keywordtype">int</span> chunkId = totalIndex/chunkSize;
<a name="l00312"></a>00312                                         <span class="keywordflow">if</span> (chunkId==multiQubit-&gt;<a class="code" href="structMultiQubit.html#ab10c88249fa3825d6227ceec01d37e37" title="The position of the chunk of the state vector held by this process in the full state...">chunkId</a>){
<a name="l00314"></a>00314                                                 sscanf(line, <span class="stringliteral">&quot;%lf, %lf&quot;</span>, &amp;(stateVecReal[indexInChunk]), 
<a name="l00315"></a>00315                                                                 &amp;(stateVecImag[indexInChunk]));
<a name="l00316"></a>00316                                                 indexInChunk += 1;
<a name="l00317"></a>00317                                         }
<a name="l00318"></a>00318                                         totalIndex += 1;
<a name="l00319"></a>00319                                 }
<a name="l00320"></a>00320                         }       
<a name="l00321"></a>00321                         fclose(fp);
<a name="l00322"></a>00322                 }
<a name="l00323"></a>00323                 <a class="code" href="qubits_8h.html#a8d31fe2d1ad4d01e2a1f5f6b8bc15b77" title="Guarantees that all code up to the given point has been executed on all nodes (if...">syncQuESTEnv</a>(env);
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a03b3577a891731d505bc4b879fcca9d3"></a><!-- doxytag: member="qubits_debug.h::initStateDebug" ref="a03b3577a891731d505bc4b879fcca9d3" args="(MultiQubit *multiQubit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initStateDebug </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMultiQubit.html">MultiQubit</a> *&nbsp;</td>
          <td class="paramname"> <em>multiQubit</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise the state vector of probability amplitudes to an (unphysical) state with each component of each probability amplitude a unique floating point value. </p>
<p>For debugging processes </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>multiQubit</em>&nbsp;</td><td>object representing the set of qubits to be initialised </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qubits_8c_source.html#l00260">260</a> of file <a class="el" href="qubits_8c_source.html">qubits.c</a>.</p>

<p>References <a class="el" href="qubits_8h_source.html#l00055">MultiQubit::chunkId</a>, <a class="el" href="qubits_8h_source.html#l00014">ComplexArray::imag</a>, <a class="el" href="qubits_8h_source.html#l00053">MultiQubit::numAmps</a>, <a class="el" href="qubits_8h_source.html#l00013">ComplexArray::real</a>, <a class="el" href="precision_8h_source.html#l00023">REAL</a>, and <a class="el" href="qubits_8h_source.html#l00046">MultiQubit::stateVec</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00261"></a>00261 {
<a name="l00262"></a>00262         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> chunkSize;
<a name="l00263"></a>00263         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> index;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         <span class="comment">// dimension of the state vector</span>
<a name="l00266"></a>00266         chunkSize = multiQubit-&gt;<a class="code" href="structMultiQubit.html#ae16f47d8b725c914fb7f66b6498d79db" title="Number of probability amplitudes held in stateVec by this process In the non-MPI...">numAmps</a>;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268         <span class="comment">// Can&apos;t use multiQubit-&gt;stateVec as a private OMP var</span>
<a name="l00269"></a>00269         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecReal = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a4195cac6c784ea1b6271f1c7dba1548a">real</a>;
<a name="l00270"></a>00270         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecImag = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a79dde47c7ae530c79cebfdf57b225968">imag</a>;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> chunkOffset = (2.0*chunkSize*multiQubit-&gt;<a class="code" href="structMultiQubit.html#ab10c88249fa3825d6227ceec01d37e37" title="The position of the chunk of the state vector held by this process in the full state...">chunkId</a>)/10.0;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274         <span class="comment">// initialise the state to |0000..0000&gt;</span>
<a name="l00275"></a>00275 <span class="preprocessor"># ifdef _OPENMP</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span><span class="preprocessor"># pragma omp parallel \</span>
<a name="l00277"></a>00277 <span class="preprocessor">        default  (none) \</span>
<a name="l00278"></a>00278 <span class="preprocessor">        shared   (chunkSize, stateVecReal, stateVecImag, chunkOffset) \</span>
<a name="l00279"></a>00279 <span class="preprocessor">        private  (index) </span>
<a name="l00280"></a>00280 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00281"></a>00281 <span class="preprocessor"></span>        {
<a name="l00282"></a>00282 <span class="preprocessor"># ifdef _OPENMP</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span><span class="preprocessor">                # pragma omp for schedule (static)</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00285"></a>00285 <span class="preprocessor"></span>                <span class="keywordflow">for</span> (index=0; index&lt;chunkSize; index++) {
<a name="l00286"></a>00286                         stateVecReal[index] = chunkOffset + (index*2.0)/10.0;
<a name="l00287"></a>00287                         stateVecImag[index] = chunkOffset + (index*2.0+1.0)/10.0;
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7169fd0442cbc3418f3fac4d13363ca2"></a><!-- doxytag: member="qubits_debug.h::initStateOfSingleQubit" ref="a7169fd0442cbc3418f3fac4d13363ca2" args="(MultiQubit *multiQubit, int qubitId, int outcome)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initStateOfSingleQubit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMultiQubit.html">MultiQubit</a> *&nbsp;</td>
          <td class="paramname"> <em>multiQubit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>qubitId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>outcome</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise the state vector of probability amplitudes such that one qubit is set to 'outcome' and all other qubits are in an equal superposition of zero and one. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>multiQubit</em>&nbsp;</td><td>object representing the set of qubits to be initialised </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>qubitId</em>&nbsp;</td><td>id of qubit to set to state 'outcome' </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>of qubit 'qubitId' </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qubits_8c_source.html#l00213">213</a> of file <a class="el" href="qubits_8c_source.html">qubits.c</a>.</p>

<p>References <a class="el" href="qubits_8h_source.html#l00055">MultiQubit::chunkId</a>, <a class="el" href="qubits_8c_source.html#l00015">DEBUG</a>, <a class="el" href="qubits_8c_source.html#l01698">extractBit()</a>, <a class="el" href="qubits_8h_source.html#l00014">ComplexArray::imag</a>, <a class="el" href="qubits_8h_source.html#l00053">MultiQubit::numAmps</a>, <a class="el" href="qubits_8h_source.html#l00057">MultiQubit::numChunks</a>, <a class="el" href="qubits_8h_source.html#l00013">ComplexArray::real</a>, <a class="el" href="precision_8h_source.html#l00023">REAL</a>, and <a class="el" href="qubits_8h_source.html#l00046">MultiQubit::stateVec</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00214"></a>00214 {
<a name="l00215"></a>00215         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> chunkSize, stateVecSize;
<a name="l00216"></a>00216         <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> index;
<a name="l00217"></a>00217         <span class="keywordtype">int</span> bit;
<a name="l00218"></a>00218         <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> chunkId=multiQubit-&gt;<a class="code" href="structMultiQubit.html#ab10c88249fa3825d6227ceec01d37e37" title="The position of the chunk of the state vector held by this process in the full state...">chunkId</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220         <span class="comment">// dimension of the state vector</span>
<a name="l00221"></a>00221         chunkSize = multiQubit-&gt;<a class="code" href="structMultiQubit.html#ae16f47d8b725c914fb7f66b6498d79db" title="Number of probability amplitudes held in stateVec by this process In the non-MPI...">numAmps</a>;
<a name="l00222"></a>00222         stateVecSize = chunkSize*multiQubit-&gt;<a class="code" href="structMultiQubit.html#acd43f2f57991709c9e94f73662c972b2" title="Number of chunks the state vector is broken up into -- the number of MPI processes...">numChunks</a>;
<a name="l00223"></a>00223         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> normFactor = 1.0/sqrt((<a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a>)stateVecSize/2.0);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <span class="comment">// Can&apos;t use multiQubit-&gt;stateVec as a private OMP var</span>
<a name="l00226"></a>00226         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecReal = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a4195cac6c784ea1b6271f1c7dba1548a">real</a>;
<a name="l00227"></a>00227         <a class="code" href="precision_8h.html#a4b654506f18b8bfd61ad2a29a7e38c25">REAL</a> *stateVecImag = multiQubit-&gt;<a class="code" href="structMultiQubit.html#a45483190d6b01ef6b2f98f2bec9ab94f" title="Probablilty amplitudes for the multi qubit state.">stateVec</a>.<a class="code" href="structComplexArray.html#a79dde47c7ae530c79cebfdf57b225968">imag</a>;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229         <span class="comment">// initialise the state to |0000..0000&gt;</span>
<a name="l00230"></a>00230 <span class="preprocessor"># ifdef _OPENMP</span>
<a name="l00231"></a>00231 <span class="preprocessor"></span><span class="preprocessor"># pragma omp parallel \</span>
<a name="l00232"></a>00232 <span class="preprocessor">        default  (none) \</span>
<a name="l00233"></a>00233 <span class="preprocessor">        shared   (chunkSize, stateVecReal, stateVecImag, normFactor, qubitId, outcome) \</span>
<a name="l00234"></a>00234 <span class="preprocessor">        private  (index, bit) </span>
<a name="l00235"></a>00235 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00236"></a>00236 <span class="preprocessor"></span>        {
<a name="l00237"></a>00237 <span class="preprocessor"># ifdef _OPENMP</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span><span class="preprocessor">                # pragma omp for schedule (static)</span>
<a name="l00239"></a>00239 <span class="preprocessor"></span><span class="preprocessor"># endif</span>
<a name="l00240"></a>00240 <span class="preprocessor"></span>                <span class="keywordflow">for</span> (index=0; index&lt;chunkSize; index++) {
<a name="l00241"></a>00241                         bit = <a class="code" href="qubits_8c.html#a100463f6ec212c76a5fad99579000505" title="Get the value of the bit at a particular index in a number.">extractBit</a>(qubitId, index+chunkId*chunkSize);
<a name="l00242"></a>00242                         <span class="keywordflow">if</span> (bit==outcome) {
<a name="l00243"></a>00243                                 stateVecReal[index] = normFactor;
<a name="l00244"></a>00244                                 stateVecImag[index] = 0.0;
<a name="l00245"></a>00245                         } <span class="keywordflow">else</span> {
<a name="l00246"></a>00246                                 stateVecReal[index] = 0.0;
<a name="l00247"></a>00247                                 stateVecImag[index] = 0.0;
<a name="l00248"></a>00248                         }
<a name="l00249"></a>00249                 }
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251         <span class="keywordflow">if</span> (<a class="code" href="qubits_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>) printf(<span class="stringliteral">&quot;COMPLETED INIT\n&quot;</span>);
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a62da5b58d8ce84e6f4d24be1b872294e"></a><!-- doxytag: member="qubits_debug.h::reportNodeList" ref="a62da5b58d8ce84e6f4d24be1b872294e" args="(QuESTEnv env)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reportNodeList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structQuESTEnv.html">QuESTEnv</a>&nbsp;</td>
          <td class="paramname"> <em>env</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Report a list of CPU hostnames and the rank that is running on each if running with MPI enabled and an error message otherwise. </p>
<p>For debugging purposes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>env</em>&nbsp;</td><td>object representing the execution environment. A single instance is used for each program </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="qubits__env__local_8c_source.html#l00057">57</a> of file <a class="el" href="qubits__env__local_8c_source.html">qubits_env_local.c</a>.</p>

<p>References <a class="el" href="qubits_8h_source.html#l00065">QuESTEnv::rank</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057                                  {
<a name="l00058"></a>00058         printf(<span class="stringliteral">&quot;Hostname unknown: running locally\n&quot;</span>);
<a name="l00059"></a>00059 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 20 Feb 2018 for Distributed QuEST by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
